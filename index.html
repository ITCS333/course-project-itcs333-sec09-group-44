<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Dev Course Homepage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="src/common/styles.css" />
</head>
<body class="bg-light">

    <header class="border-bottom bg-white py-4 mb-4 shadow-sm">
        <div class="container text-center">
            <h1 class="h3 mb-0 text-primary">Welcome to the Web Development Course</h1>
            <p class="text-muted mt-2">ITCS333 - Section 09 - Group 44</p>
        </div>
    </header>

    <main class="container mb-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                
                <nav class="card shadow-sm border-0">
                    <div class="card-body p-4">
                        <h2 class="h5 mb-4 border-bottom pb-2">Site Navigation</h2>

                        <div class="d-grid gap-3">
                            
                            <a href="src/auth/login.html" class="btn btn-outline-primary text-start">
                                ğŸ” <strong>Login</strong>
                            </a>

                            <div class="mt-2">
                                <h6 class="text-uppercase text-muted small fw-bold">Admin Portal (Teachers)</h6>
                                <div class="list-group">
                                    <a href="src/admin/manage_users.html" class="list-group-item list-group-item-action">
                                        ğŸ‘¥ Manage Students (Task 1)
                                    </a>
                                    <a href="src/resources/admin.html" class="list-group-item list-group-item-action">
                                        ğŸ“š Manage Resources (Task 2)
                                    </a>
                                    <a href="src/weekly/admin.html" class="list-group-item list-group-item-action">
                                        ğŸ“… Manage Weekly Breakdown (Task 3)
                                    </a>
                                    <a href="src/assignments/admin.html" class="list-group-item list-group-item-action">
                                        ğŸ“ Manage Assignments (Task 4)
                                    </a>
                                </div>
                            </div>

                            <div class="mt-2">
                                <h6 class="text-uppercase text-muted small fw-bold">Student Area</h6>
                                <div class="list-group">
                                    <a href="src/resources/list.html" class="list-group-item list-group-item-action">
                                        ğŸ“š View Course Resources
                                    </a>
                                    <a href="src/weekly/list.html" class="list-group-item list-group-item-action">
                                        ğŸ“… View Weekly Breakdown
                                    </a>
                                    <a href="src/assignments/list.html" class="list-group-item list-group-item-action">
                                        ğŸ“ View Assignments
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>
                </nav>

            </div>
        </div>
    </main>

    <footer class="text-center text-muted py-3 small">
        &copy; 2025 Web Dev Course Project
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    // Simple Session Check to update Login Button
    fetch('src/auth/api/me.php')
        .then(response => response.json())
        .then(data => {
            if (data.logged_in) {
                const loginLink = document.querySelector('a[href="src/auth/login.html"]');
                if (loginLink) {
                    loginLink.innerHTML = `ğŸ‘¤ <strong>Logged in as ${data.name}</strong> (Go to Dashboard)`;
                    // Redirect based on role
                    if (data.role === 'admin') {
                        loginLink.href = "src/admin/manage_users.html";
                    } else {
                        loginLink.href = "src/resources/list.html";
                    }
                    // Add Logout button logic here if needed
                }
            }
        })
        .catch(err => console.log("Guest User"));
    </script>
</body>
</html>